<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CosmoDetect — Satellite Identification of Reynoutria (Japanese knotweed)</title>
  <meta name="description" content="Space technology (satellite Earth observation + AI) to detect, map, and monitor Reynoutria japonica (Japanese knotweed). Scroll to scrub the hero video – no autoplay." />
  <meta name="color-scheme" content="light dark" />
  <link rel="preload" as="video" href="assets/hero.mp4" type="video/mp4">

  <style>
    :root{
      --bg: #0b1020;
      --bg-2: #0e1530;
      --card: #121a36;
      --text: #e8edf7;
      --muted: #9fb3d9;
      --accent: #61d0ff;
      --accent-2: #7ef29a;
      --ring: rgba(97,208,255,.4);
      --maxw: 1120px;
      --radius: 14px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --stage-height: 320vh; /* how long you scroll to scrub the video */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif;
      background: radial-gradient(1200px 600px at 70% -10%, #1c2a66 0%, transparent 60%),
                  radial-gradient(1000px 600px at 10% -20%, #113 0%, transparent 55%),
                  linear-gradient(180deg, var(--bg) 0%, var(--bg-2) 100%);
      color:var(--text);
      line-height:1.55;
    }
    a{color:var(--accent)}
    /* ===== HERO (now a scroll stage) ===== */
    header.stage{
      position:relative;
      height: var(--stage-height); /* gives us scroll room */
      overflow:visible;
    }
    .pin{                /* pinned hero, like before */
      position:sticky; top:0; height:100svh; overflow:hidden; isolation:isolate;
    }
    .hero-media{
      position:absolute; inset:0; z-index:-2; overflow:hidden; background:#000;
    }
    .hero-media::after{
      content:""; position:absolute; inset:0;
      background: radial-gradient(60% 60% at 70% 10%, rgba(0,0,0,.0), rgba(0,0,0,.55)),
                  linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.65));
      pointer-events:none;
    }
    video.hero{
      width:100%; height:100%; object-fit:cover;
      filter:saturate(1.05) contrast(1.05) brightness(.92);
      /* DO NOT autoplay — scroll will set currentTime */
    }
    .container{max-width:var(--maxw); margin:0 auto; padding:clamp(16px,2vw,24px)}
    .headline{
      text-align:center; padding: clamp(48px, 8vw, 96px) 16px;
      backdrop-filter: blur(2px);
    }
    .badge{
      display:inline-block; padding:6px 10px; border:1px solid var(--ring);
      border-radius:999px; color:var(--muted); font-size:12px; letter-spacing:.2px;
      background:rgba(9,14,30,.55);
    }
    h1{
      font-weight:800; margin:.6em 0 .35em 0; line-height:1.05;
      font-size: clamp(28px, 5.5vw, 56px);
      text-wrap: balance;
    }
    .lead{
      color:var(--muted); font-size: clamp(15px, 2.2vw, 18px); max-width: 60ch; margin: 0 auto 20px;
    }
    .cta{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:14px }
    .btn{
      --_bg: linear-gradient(135deg, var(--accent), var(--accent-2));
      display:inline-flex; align-items:center; gap:10px; padding:12px 18px; border-radius:12px;
      color:#06101a; font-weight:700; text-decoration:none; background:var(--_bg); box-shadow: var(--shadow);
      border:0; cursor:pointer;
    }
    .btn.secondary{background:transparent; color:var(--text); border:1px solid var(--ring)}
    /* Sections (unchanged) */
    section{padding: clamp(48px, 7vw, 96px) 0}
    .grid{display:grid; gap:24px}
    .twocol{grid-template-columns: 1.1fr .9fr}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--radius); padding:24px; box-shadow: var(--shadow)
    }
    h2{font-size: clamp(22px, 3.4vw, 34px); margin:0 0 12px 0}
    h3{margin: 0 0 10px 0}
    ul{padding-left:18px; margin:10px 0}
    .kpis{display:grid; grid-template-columns: repeat(3,1fr); gap:16px; margin-top:16px}
    .kpi{padding:14px 16px; border-radius:12px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08)}
    .kpi b{font-size:20px}
    .note{font-size:13px; color:var(--muted)}
    .reveal{opacity:0; transform: translateY(10px); transition: .6s ease}
    .reveal.in{opacity:1; transform:none}
    @media (max-width: 980px){ .twocol{grid-template-columns:1fr} }
    @media (prefers-reduced-motion: reduce){
      .reveal{opacity:1; transform:none}
    }
    footer{
      padding:40px 0; color:var(--muted); border-top:1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
      text-align:center;
    }
    .small{font-size:12.5px}
    .pill{display:inline-block; font-size:12px; border:1px solid rgba(255,255,255,.12); padding:6px 10px; border-radius:999px; color:var(--muted)}
    .list-cards{display:grid; grid-template-columns: repeat(3,1fr); gap:18px}
    @media (max-width:860px){.list-cards{grid-template-columns:1fr}}
  </style>
</head>
<body>

  <!-- HERO becomes a scroll-controlled stage -->
  <header class="stage" id="stage">
    <div class="pin">
      <div class="hero-media" aria-hidden="true">
        <!-- No autoplay; scroll controls currentTime -->
        <video id="heroVideo" class="hero"
               src="assets/hero.mp4"
               preload="metadata"
               playsinline
               muted
               poster="assets/poster.jpg"></video>
      </div>
      <div class="container headline">
        <span class="badge">Space technology • Earth observation • AI</span>
        <h1>Detecting <em>Reynoutria japonica</em> (Japanese knotweed) from Space</h1>
        <p class="lead">
          Scroll to animate the background. CosmoDetect uses satellite Earth-observation data to identify, map,
          and monitor Reynoutria outbreaks so agencies can act early.
        </p>
        <div class="cta">
          <a class="btn" href="#problem" aria-label="Learn about the Reynoutria problem">Learn the problem</a>
          <span class="btn secondary" aria-hidden="true">Scroll to animate ⬇️</span>
        </div>
        <noscript><p class="note">JavaScript is disabled. The hero background uses a static poster image.</p></noscript>
      </div>
    </div>
  </header>

  <!-- PROBLEM -->
  <section id="problem">
    <div class="container grid twocol">
      <div class="card reveal">
        <h2>The Problem: Why Reynoutria Matters</h2>
        <ul>
          <li><b>Aggressive spread:</b> expands mainly via rhizome fragments; even small pieces can start new colonies.</li>
          <li><b>Infrastructure risk:</b> dense stands can exploit cracks in asphalt and masonry and obstruct drainage.</li>
          <li><b>Biodiversity impact:</b> forms monocultures that outcompete native plants and alter habitats.</li>
          <li><b>Compliance:</b> management is a legal obligation in many jurisdictions and a priority under EU policy.</li>
        </ul>
        <div class="kpis">
          <div class="kpi"><b>Large areas</b><br><span class="small">Outbreaks span road/rail corridors, rivers, and urban edges.</span></div>
          <div class="kpi"><b>Hard to survey</b><br><span class="small">Ground crews miss sites; access is costly and seasonal.</span></div>
          <div class="kpi"><b>Time-critical</b><br><span class="small">Early detection enables cheaper, more effective control.</span></div>
        </div>
      </div>
      <div class="card reveal" style="display:grid; gap:14px">
        <h2>What We Deliver</h2>
        <ul>
          <li><b>Species-level maps</b> with confidence scores (Web + GeoPackage export).</li>
          <li><b>Change monitoring</b> (expansion/decline) across seasons and years.</li>
          <li><b>Priority hotspots</b> for treatment planning and access logistics.</li>
          <li><b>API & dashboard</b> for operations, reporting, and audit trails.</li>
        </ul>
        <p class="note">We provide mapping and analytics only; we do not apply herbicides or perform removals.</p>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section id="how">
    <div class="container grid twocol">
      <div class="card reveal">
        <h2>How It Works (Space Technology)</h2>
        <ol>
          <li><b>Orbit:</b> we ingest multispectral satellite imagery (e.g., Sentinel-2; optional high-res tasking).</li>
          <li><b>Time-series:</b> we analyze plant phenology (growth/flowering/senescence) to separate look-alikes.</li>
          <li><b>Models:</b> AI segmentation + object-based classifiers combine optical and radar signals.</li>
          <li><b>QA:</b> targeted field photos or drone passes strengthen model confidence where needed.</li>
        </ol>
      </div>
      <div class="card reveal">
        <h2>Who Benefits</h2>
        <div class="list-cards">
          <div class="pill">Environmental agencies</div>
          <div class="pill">Water authorities</div>
          <div class="pill">Road & rail managers</div>
          <div class="pill">Municipalities</div>
          <div class="pill">Forestry</div>
          <div class="pill">Utilities</div>
        </div>
        <p class="note" style="margin-top:12px">Typical deliverables: interactive web map, shapefiles/GeoPackage, and a brief PDF with area stats and recommended action windows.</p>
      </div>
    </div>
  </section>

  <!-- CALL TO ACTION -->
  <section id="pilot">
    <div class="container">
      <div class="card reveal" style="text-align:center">
        <h2>Pilot a Region</h2>
        <p class="lead">Choose a county/voivodeship. We’ll deliver a baseline map of Reynoutria, monthly updates during the season, and a post-treatment assessment.</p>
        <div class="cta">
          <a class="btn" href="mailto:contact@cosmodetect.example?subject=CosmoDetect%20Pilot%20Inquiry">Contact us</a>
          <a class="btn secondary" href="#references">See references</a>
        </div>
      </div>
    </div>
  </section>

  <!-- REFERENCES -->
  <section id="references">
    <div class="container">
      <div class="card reveal">
        <h2>References & Further Reading</h2>
        <ul>
          <li>EU policy on invasive alien species (e.g., Regulation 1143/2014 and guidance for Member States).</li>
          <li>National guidelines for Japanese knotweed management (e.g., environment agencies, public works).</li>
          <li>Scientific literature on satellite/remote sensing detection of invasive plants and phenology-based mapping.</li>
        </ul>
        <p class="note">Add your preferred sources/links here (agency guidance, local laws, or case studies).</p>
      </div>
    </div>
  </section>

  <footer>
    <div class="container small">
      <div>© <span id="year"></span> CosmoDetect. Space technology for invasive-species intelligence.</div>
      <div class="note">Privacy-respecting site: no trackers, no cookies.</div>
    </div>
  </footer>

  <script>
    // ===== Reveal on scroll (unchanged)
    const io = new IntersectionObserver((entries)=> {
      entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('in'); });
    }, {threshold: 0.08});
    document.querySelectorAll('.reveal').forEach(el => io.observe(el));
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Scroll-controlled video scrubbing (NEW)
    (function(){
      const stage = document.getElementById('stage');   // the tall scroll section
      const video = document.getElementById('heroVideo');
      let duration = 0;
      let ready = false;
      let pendingProgress = 0; // if user scrolls before metadata loads

      // Ensure the video is paused and ready to seek
      function setReady(){
        if(ready) return;
        duration = video.duration || 0;
        if(duration > 0){
          ready = true;
          video.pause();
          // show first frame (time 0)
          try { video.currentTime = (pendingProgress || 0) * Math.max(0.0001, duration - 0.04); } catch(e){}
        }
      }

      video.addEventListener('loadedmetadata', setReady);
      video.addEventListener('canplay', setReady);
      // iOS sometimes needs a small nudge
      if (video.readyState >= 1) setReady();

      function clamp01(x){ return Math.max(0, Math.min(1, x)); }

      function computeProgress(){
        // progress through the stage (0..1)
        const rect = stage.getBoundingClientRect();
        const total = rect.height - window.innerHeight;
        const p = clamp01((0 - rect.top) / (total || 1));
        return p;
      }

      function syncVideoToScroll(p){
        if(!ready){
          pendingProgress = p; // store for when metadata arrives
          return;
        }
        // seek without playing
        const safeDur = Math.max(0.0001, duration - 0.04); // avoid end-of-file stalls
        const t = p * safeDur;
        if (Math.abs(video.currentTime - t) > 0.03) { // reduce needless seeks
          try { video.currentTime = t; } catch(e){}
        }
      }

      let raf = null;
      function tick(){
        raf = null;
        const p = computeProgress();
        syncVideoToScroll(p);
      }
      const onScroll = ()=> { if(!raf) raf = requestAnimationFrame(tick); };

      window.addEventListener('scroll', onScroll, {passive:true});
      window.addEventListener('resize', onScroll);
      // initial sync
      onScroll();
    })();
  </script>
  <script>
  (function(){
    const video = document.getElementById('heroVideo');
    let primed = false;

    function prime(){
      if (primed) return;
      primed = true;
      // brief play-pause to unlock precise seeking on some mobile browsers
      const p = video.play();
      if (p && typeof p.then === 'function') {
        p.then(() => video.pause()).catch(() => {/* ignore */});
      } else {
        try { video.pause(); } catch(e) {}
      }
    }

    // Prime on first scroll/tap/keydown
    window.addEventListener('scroll', prime, { once: true, passive: true });
    window.addEventListener('pointerdown', prime, { once: true });
    window.addEventListener('keydown', prime, { once: true });
  })();
</script>
</body>
</html>
